import{_ as x,c as r,b as n,g as l,h as s,j as I,e as u,n as _,d as v,k as U,l as D,a as t,t as S,r as w,m as A,o as O,f as M,u as W,p as G,i as y}from"./index-Dp99rAEB.js";import{C as V,B}from"./BriefcaseIcon-C992-8GF.js";import{U as j}from"./UserIcon-HPLXSr79.js";import{L as z}from"./LockIcon-C_I7bnhj.js";import{A as J,g as K}from"./avatarHelper-BWmc_Bc4.js";import{A as Q,D as X}from"./AppLogo-ApcJy4sY.js";import{L as Y}from"./LogoutIcon-BEAykltr.js";import{R as $}from"./RippleEffect-WDp0XzxJ.js";const ee={name:"SidebarToggle",components:{ChevronDownIcon:V},props:{isCollapsed:{type:Boolean,default:!1}},emits:["toggle"]};function oe(i,o,a,e,m,g){const f=l("ChevronDownIcon");return s(),r("button",{onClick:o[0]||(o[0]=k=>i.$emit("toggle")),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200 shadow-sm hover:shadow-md"},[n(f,{className:`w-4 h-4 text-gray-600 dark:text-gray-400 transition-transform duration-300 ${a.isCollapsed?"-rotate-90":"rotate-90"}`},null,8,["className"])])}const te=x(ee,[["render",oe]]),ae={name:"SidebarLink",props:{to:{type:String,default:null},icon:{type:Object,required:!0},sidebarCollapsed:{type:Boolean,default:!1}},emits:["click"]},se={key:0,class:"ml-3 font-medium"},re={key:0,class:"ml-3 font-medium"};function ne(i,o,a,e,m,g){const f=l("router-link");return s(),r("li",null,[a.to?(s(),I(f,{key:0,to:a.to,class:_(["flex items-center px-3 py-2 rounded-l-lg rounded-r-lg text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-700/80 transition-all duration-200",a.sidebarCollapsed?"justify-center px-2":""]),"active-class":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm rounded-l-lg rounded-r-sm"},{default:u(()=>[(s(),I(U(a.icon),{className:a.sidebarCollapsed?"w-6 h-6":"w-5 h-5"},null,8,["className"])),a.sidebarCollapsed?v("",!0):(s(),r("span",se,[D(i.$slots,"default")]))]),_:3},8,["to","class"])):(s(),r("button",{key:1,class:_(["w-full flex items-center px-3 py-2 rounded-l-lg rounded-r-lg text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-700/80 transition-all duration-200",a.sidebarCollapsed?"justify-center px-2":""]),onClick:o[0]||(o[0]=k=>i.$emit("click"))},[(s(),I(U(a.icon),{className:a.sidebarCollapsed?"w-6 h-6":"w-5 h-5"},null,8,["className"])),a.sidebarCollapsed?v("",!0):(s(),r("span",re,[D(i.$slots,"default")]))],2))])}const le=x(ae,[["render",ne]]),ie={name:"DashboardIcon",props:{className:{type:String,default:"w-5 h-5"}}};function de(i,o,a,e,m,g){return s(),r("svg",{class:_(a.className),fill:"currentColor",viewBox:"0 0 24 24"},o[0]||(o[0]=[t("path",{d:"M5 3a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5Zm14 18a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h4ZM5 11a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2H5Zm14 2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h4Z"},null,-1)]),2)}const Z=x(ie,[["render",de]]),ce={name:"UsersIcon",props:{className:{type:String,default:"w-6 h-6"}}};function ge(i,o,a,e,m,g){return s(),r("svg",{class:_(a.className),fill:"currentColor",viewBox:"0 0 24 24"},o[0]||(o[0]=[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H6Zm7.25-2.095c.478-.86.75-1.85.75-2.905a5.973 5.973 0 0 0-.75-2.906 4 4 0 1 1 0 5.811ZM15.466 20c.34-.588.535-1.271.535-2v-1a5.978 5.978 0 0 0-1.528-4H18a4 4 0 0 1 4 4v1a2 2 0 0 1-2 2h-4.535Z","clip-rule":"evenodd"},null,-1)]),2)}const E=x(ce,[["render",ge]]),ue={name:"UserSettingsIcon",props:{className:{type:String,default:"w-4 h-4"}}};function me(i,o,a,e,m,g){return s(),r("svg",{class:_(a.className),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[0]||(o[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)]),2)}const fe=x(ue,[["render",me]]),he={name:"AppLayout",components:{ChevronDownIcon:V,UserIcon:j,LockIcon:z,BriefcaseIcon:B,Avatar:J,DarkModeToggle:X,AppLogo:Q,SidebarToggle:te,SidebarLink:le,LogoutIcon:Y,DashboardIcon:Z,UsersIcon:E,UserSettingsIcon:fe,RippleEffect:$},setup(){const i=W(),o=G(),a=w(null),e=w(!1),m=w(!0),g=w(!1),f=w(!1),k=A(()=>{var d;return((d=o.meta)==null?void 0:d.title)||o.name||"Dashboard"}),b=A(()=>{var d;return((d=o.meta)==null?void 0:d.subtitle)||""});return O(async()=>{if(!M.isAuthenticated()){i.push("/login");return}try{const h=await M.me();h.success&&(a.value=h.data.user)}catch(h){console.error("Failed to fetch user data:",h)}finally{m.value=!1}document.addEventListener("click",h=>{h.target.closest(".relative")||(e.value=!1)});const d=()=>{typeof window<"u"&&window.innerWidth>=768&&(f.value=!1)};typeof window<"u"&&window.addEventListener("resize",d)}),{user:a,showUserMenu:e,loading:m,sidebarCollapsed:g,showMobileSidebar:f,getAvatarImage:K,pageTitle:k,pageSubtitle:b,toggleSidebar:()=>{g.value=!g.value},handleLogout:async()=>{try{await M.logout()}catch(d){console.error("Logout error:",d)}finally{i.push("/login")}},UserIcon:j,BriefcaseIcon:B,LockIcon:z,DashboardIcon:Z,UsersIcon:E}}},_e={class:"min-h-screen bg-gray-50 dark:bg-gray-900 flex"},be={key:0,class:"transition-opacity duration-300 flex-1 flex items-center justify-center mr-8"},pe={class:"flex items-center"},ye={class:"mt-6 px-3"},ve={class:"space-y-2"},xe={class:"flex-1 flex flex-col min-w-0"},ke={class:"bg-gray-50 dark:bg-gray-900"},we={class:"px-8 sm:px-12 lg:px-16"},Ce={class:"flex items-start flex-1 h-full pt-5"},Se=["onClick","onTouchstart"],Ie={key:0,class:"flex-1"},Me={class:"text-2xl pt-2 font-bold text-gray-900 dark:text-white"},Le={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Te={key:1},Ne={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ue={class:"flex items-start space-x-4 pt-4"},De={class:"flex items-center space-x-4"},Ae={class:"relative"},Be=["onClick","onTouchstart"],je={key:1,class:"skeleton-avatar"},ze={key:2,class:"hidden sm:block"},Ze={key:3,class:"skeleton-text w-20 hidden sm:block"},Ee={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10"},Ve={class:"py-1"},Re=["onClick","onTouchstart"],He={class:"flex-1 overflow-auto"},Pe={class:"py-8 px-8 sm:px-12 lg:px-16"};function qe(i,o,a,e,m,g){const f=l("AppLogo"),k=l("SidebarToggle"),b=l("SidebarLink"),C=l("RippleEffect"),L=l("DarkModeToggle"),d=l("Avatar"),h=l("ChevronDownIcon"),R=l("UserSettingsIcon"),H=l("router-link"),P=l("LogoutIcon"),q=l("router-view");return s(),r("div",_e,[t("aside",{class:_(["bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out z-50",e.sidebarCollapsed?"w-16":"w-64","md:relative md:translate-x-0",e.showMobileSidebar?"fixed inset-y-0 left-0 translate-x-0":"fixed inset-y-0 left-0 -translate-x-full md:translate-x-0"])},[t("div",{class:_(["h-16 flex items-center py-3 mt-2",e.sidebarCollapsed?"justify-center px-6":"justify-between px-6 pr-6"])},[e.sidebarCollapsed?v("",!0):(s(),r("div",be,[n(f)])),t("div",pe,[n(k,{isCollapsed:e.sidebarCollapsed,onToggle:e.toggleSidebar},null,8,["isCollapsed","onToggle"])])],2),t("nav",ye,[t("ul",ve,[n(b,{to:"/dashboard",icon:e.DashboardIcon,sidebarCollapsed:e.sidebarCollapsed},{default:u(()=>o[2]||(o[2]=[y(" Dashboard ")])),_:1,__:[2]},8,["icon","sidebarCollapsed"]),n(b,{to:"/users",icon:e.UsersIcon,sidebarCollapsed:e.sidebarCollapsed},{default:u(()=>o[3]||(o[3]=[y(" Users ")])),_:1,__:[3]},8,["icon","sidebarCollapsed"]),n(b,{to:"/roles",icon:e.BriefcaseIcon,sidebarCollapsed:e.sidebarCollapsed},{default:u(()=>o[4]||(o[4]=[y(" Roles ")])),_:1,__:[4]},8,["icon","sidebarCollapsed"]),n(b,{icon:e.LockIcon,sidebarCollapsed:e.sidebarCollapsed},{default:u(()=>o[5]||(o[5]=[y(" Settings ")])),_:1,__:[5]},8,["icon","sidebarCollapsed"])])])],2),t("div",xe,[t("header",ke,[t("div",we,[t("div",{class:_(["flex justify-between",e.pageTitle!=="Dashboard"?"h-24":"h-16"])},[t("div",Ce,[n(C,{color:"rgba(107, 114, 128, 0.3)"},{default:u(({createRipple:c})=>[t("button",{onClick:p=>{c(p),e.showMobileSidebar=!e.showMobileSidebar},onTouchstart:c,class:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors mr-3"},o[6]||(o[6]=[t("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]),40,Se)]),_:1}),e.pageTitle!=="Dashboard"?(s(),r("div",Ie,[t("h1",Me,S(e.pageTitle),1),e.pageSubtitle?(s(),r("p",Le,S(e.pageSubtitle),1)):v("",!0)])):(s(),r("div",Te,[t("h2",Ne,S(e.pageTitle),1)]))]),t("div",Ue,[t("div",De,[n(L),t("div",Ae,[n(C,{color:"rgba(107, 114, 128, 0.3)"},{default:u(({createRipple:c})=>{var p,T,N;return[t("button",{onClick:F=>{c(F),e.showUserMenu=!e.showUserMenu},onTouchstart:c,class:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"},[e.loading?(s(),r("div",je)):(s(),I(d,{key:0,imageUrl:e.getAvatarImage(((p=e.user)==null?void 0:p.username)||""),size:"md",alt:((T=e.user)==null?void 0:T.name)||"User Avatar"},null,8,["imageUrl","alt"])),e.loading?(s(),r("div",Ze)):(s(),r("span",ze,S(((N=e.user)==null?void 0:N.name)||"User"),1)),n(h,{className:"w-4 h-4"})],40,Be)]}),_:1}),e.showUserMenu?(s(),r("div",Ee,[t("div",Ve,[n(H,{to:"/profile",onClick:o[0]||(o[0]=c=>e.showUserMenu=!1),class:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200"},{default:u(()=>[n(R,{className:"w-4 h-4 mr-2"}),o[7]||(o[7]=y(" Profile & API "))]),_:1,__:[7]}),n(C,{color:"rgba(225, 29, 72, 0.3)"},{default:u(({createRipple:c})=>[t("button",{onClick:p=>{c(p),e.handleLogout()},onTouchstart:c,class:"w-full flex items-center px-4 py-2 text-sm text-rose-600 dark:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 hover:text-rose-700 dark:hover:text-rose-300 transition-all duration-200"},[n(P,{className:"w-4 h-4 mr-2"}),o[8]||(o[8]=y(" Sign out "))],40,Re)]),_:1})])])):v("",!0)])])])],2)])]),t("main",He,[t("div",Pe,[n(q)])])]),e.showMobileSidebar?(s(),r("div",{key:0,onClick:o[1]||(o[1]=c=>e.showMobileSidebar=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden"})):v("",!0)])}const Ye=x(he,[["render",qe]]);export{Ye as default};
