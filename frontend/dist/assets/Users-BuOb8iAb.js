import{_ as P,c as C,a as t,i as T,n as m,t as g,h as l,j as v,k as Q,b as u,d as f,x as A,z as q,A as G,e as N,r as d,m as F,o as H,g as h,f as J,F as K,v as W}from"./index-Dd5TzPSX.js";import{B as X,C as Y}from"./BriefcaseIcon-CY9_fvs8.js";import{U as M}from"./UserIcon-DISMzj33.js";import{S as Z}from"./SpinnerIcon-BMtDvVyB.js";import{A as $,I as ee,D as te,E as re}from"./ActionButton-DmeIiOdQ.js";import{B as se,T as ae}from"./BaseTable-ClE-9u2E.js";import"./RippleEffect-Bft_pb-i.js";import"./LogoutIcon-6BZbfSok.js";const oe={name:"StatusBadge",props:{status:{type:String,required:!0,validator:n=>["active","disabled","blocked"].includes(n)}},computed:{statusConfig(){const n={active:{text:"Active",badgeClass:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",dotClass:"bg-green-500"},disabled:{text:"Disabled",badgeClass:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",dotClass:"bg-gray-500"},blocked:{text:"Blocked",badgeClass:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",dotClass:"bg-red-500"}};return n[this.status]||n.disabled},displayText(){return this.statusConfig.text},badgeClasses(){return this.statusConfig.badgeClass},dotClasses(){return this.statusConfig.dotClass}}};function ne(n,e,b,r,i,a){return l(),C("span",{class:m([a.badgeClasses,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors duration-200"])},[t("span",{class:m([a.dotClasses,"w-1.5 h-1.5 mr-1.5 rounded-full"])},null,2),T(" "+g(a.displayText),1)],2)}const le=P(oe,[["render",ne]]),ie={name:"RoleBadge",components:{BriefcaseIcon:X,UserIcon:M},props:{role:{type:[String,Object],required:!1,default:null}},computed:{roleName(){return this.role?typeof this.role=="string"?this.role:this.role.name||this.role.role_name:null},displayName(){return this.role?typeof this.role=="string"?this.role:this.role.display_name||this.role.role_display_name||this.role.name||this.role.role_name||"Unknown Role":"No Role"},roleConfig(){const n=this.roleName,e={admin:{badgeClass:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",iconClass:"w-3.5 h-3.5",icon:"BriefcaseIcon"},customer:{badgeClass:"bg-brand-100 text-brand-800 dark:bg-brand-900/20 dark:text-brand-400",iconClass:"w-3 h-3",icon:"UserIcon"},user:{badgeClass:"bg-brand-100 text-brand-800 dark:bg-brand-900/20 dark:text-brand-400",iconClass:"w-3 h-3",icon:"UserIcon"},default:{badgeClass:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",iconClass:"w-3 h-3",icon:"UserIcon"}};return e[n]||e.default},displayText(){return this.displayName},badgeClasses(){return this.roleConfig.badgeClass},iconClasses(){return this.roleConfig.iconClass},roleIcon(){return this.roleConfig.icon}}};function de(n,e,b,r,i,a){return l(),C("span",{class:m([a.badgeClasses,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors duration-200"])},[(l(),v(Q(a.roleIcon),{className:a.iconClasses,class:"mr-1"},null,8,["className"])),T(" "+g(a.displayText),1)],2)}const ce=P(ie,[["render",de]]),ue={name:"Users",components:{StatusBadge:le,RoleBadge:ce,UserIcon:M,SpinnerIcon:Z,EditIcon:re,DeleteIcon:te,ImpersonateIcon:ee,ActionButton:$,TablePagination:ae,BaseTable:se,ChevronDownIcon:Y},setup(){const n=d([]),e=d(!1),b=d(null),r=d(null),i=d(""),a=d(""),c=d(10),_=d(!1),k=d("created_at"),p=d("desc");let w=null;const S=()=>{clearTimeout(w),w=setTimeout(()=>{x()},300)},B=F(()=>i.value.trim()||a.value),s=F(()=>B.value?"No users found":"No users created yet"),D=F(()=>i.value.trim()&&a.value?`No users match your search "${i.value}" with status "${a.value}".`:i.value.trim()?`No users match your search "${i.value}".`:a.value?`No users found with status "${a.value}".`:"Get started by creating your first user account."),U=()=>{i.value="",a.value="",x()},R=o=>{c.value=o,x(1)},x=async(o=1)=>{e.value=!0,b.value=null;try{const y=new URLSearchParams({page:o.toString(),limit:c.value.toString(),sortBy:k.value,sortOrder:p.value});i.value.trim()&&y.append("search",i.value.trim()),a.value&&y.append("status",a.value);const I=await J.get(`/users?${y}`);if(I.success)n.value=I.data.users,r.value=I.data.pagination;else throw new Error(I.message||"Failed to load users")}catch(y){console.error("Error loading users:",y),b.value=y.message||"Failed to load users",n.value=[],r.value=null}finally{e.value=!1}},E=o=>{k.value===o?p.value=p.value==="asc"?"desc":"asc":(k.value=o,p.value="asc"),x()},O=o=>{o>=1&&o<=r.value.totalPages&&x(o)},j=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),V=o=>{console.log("Edit user:",o)},L=o=>{console.log("Delete user:",o)},z=o=>{console.log("Impersonate user:",o)};return H(()=>{x()}),{users:n,loading:e,error:b,pagination:r,searchQuery:i,statusFilter:a,perPage:c,sortField:k,sortOrder:p,showCreateUser:_,hasActiveFilters:B,emptyStateTitle:s,emptyStateMessage:D,loadUsers:x,sortBy:E,changePage:O,handlePerPageChange:R,formatDate:j,debouncedSearch:S,clearFilters:U,editUser:V,deleteUser:L,impersonateUser:z}}},ge={class:"space-y-6"},me={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},pe={class:"flex flex-col sm:flex-row gap-3"},xe={class:"relative"},ye={class:"relative"},fe={class:"flex items-center space-x-1"},he={class:"flex items-center space-x-1"},ve={class:"flex items-center space-x-1"},be={class:"flex items-center space-x-1"},ke={class:"flex items-center space-x-1"},we={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"flex items-center"},_e={class:"text-sm font-medium text-gray-900 dark:text-white"},Be={class:"text-sm text-gray-500 dark:text-gray-400"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ie={class:"px-6 py-4 whitespace-nowrap"},Se={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pe={class:"flex items-center space-x-2"},Te={class:"mt-2 text-sm font-medium text-gray-900 dark:text-white"},De={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"};function Ae(n,e,b,r,i,a){const c=h("ChevronDownIcon"),_=h("UserIcon"),k=h("RoleBadge"),p=h("StatusBadge"),w=h("ActionButton"),S=h("BaseTable"),B=h("TablePagination");return l(),C("div",ge,[t("div",me,[e[15]||(e[15]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"User Management"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage user accounts and permissions ")],-1)),t("div",pe,[t("div",xe,[e[11]||(e[11]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.searchQuery=s),type:"text",placeholder:"Search users...",class:"w-full sm:w-64 pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-colors",onInput:e[1]||(e[1]=(...s)=>r.debouncedSearch&&r.debouncedSearch(...s))},null,544),[[q,r.searchQuery]])]),t("div",ye,[A(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.statusFilter=s),class:"w-full sm:w-auto pl-3 pr-8 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white appearance-none bg-white dark:bg-gray-700 transition-colors cursor-pointer",onChange:e[3]||(e[3]=(...s)=>r.loadUsers&&r.loadUsers(...s))},e[12]||(e[12]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"disabled"},"Disabled",-1),t("option",{value:"blocked"},"Blocked",-1)]),544),[[G,r.statusFilter]]),e[13]||(e[13]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),t("button",{onClick:e[4]||(e[4]=s=>r.showCreateUser=!0),class:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-brand-600 border border-transparent rounded-lg shadow-sm hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 transition-colors duration-200 whitespace-nowrap"},e[14]||(e[14]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Create User ")]))])]),u(S,{data:r.users,loading:r.loading,error:r.error,"loading-text":"Loading users...","error-title":"Failed to load users",onRetry:r.loadUsers},{header:N(()=>[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:e[5]||(e[5]=s=>r.sortBy("name"))},[t("div",fe,[e[16]||(e[16]=t("span",null,"User",-1)),r.sortField==="name"?(l(),v(c,{key:0,class:m([{"transform rotate-180":r.sortOrder==="asc"},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])):f("",!0)])]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:e[6]||(e[6]=s=>r.sortBy("email"))},[t("div",he,[e[17]||(e[17]=t("span",null,"Email",-1)),r.sortField==="email"?(l(),v(c,{key:0,class:m([{"transform rotate-180":r.sortOrder==="asc"},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])):f("",!0)])]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:e[7]||(e[7]=s=>r.sortBy("role_name"))},[t("div",ve,[e[18]||(e[18]=t("span",null,"Role",-1)),r.sortField==="role_name"?(l(),v(c,{key:0,class:m([{"transform rotate-180":r.sortOrder==="asc"},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])):f("",!0)])]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:e[8]||(e[8]=s=>r.sortBy("status"))},[t("div",be,[e[19]||(e[19]=t("span",null,"Status",-1)),r.sortField==="status"?(l(),v(c,{key:0,class:m([{"transform rotate-180":r.sortOrder==="asc"},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])):f("",!0)])]),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-300 dark:hover:bg-gray-600",onClick:e[9]||(e[9]=s=>r.sortBy("created_at"))},[t("div",ke,[e[20]||(e[20]=t("span",null,"Created",-1)),r.sortField==="created_at"?(l(),v(c,{key:0,class:m([{"transform rotate-180":r.sortOrder==="asc"},"w-4 h-4 transition-transform duration-200"])},null,8,["class"])):f("",!0)])]),e[21]||(e[21]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ",-1))])]),body:N(()=>[(l(!0),C(K,null,W(r.users,(s,D)=>(l(),C("tr",{key:s.id,class:"odd:bg-gray-50 odd:dark:bg-gray-700 even:bg-white even:dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",we,[t("div",Ce,[u(_,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mr-3"}),t("div",null,[t("div",_e,g(s.name),1),t("div",Be,g(s.username||"No username"),1)])])]),t("td",Ue,g(s.email),1),t("td",Ie,[u(k,{role:s.role_name?{name:s.role_name,display_name:s.role_display_name}:null},null,8,["role"])]),t("td",Se,[u(p,{status:s.status},null,8,["status"])]),t("td",Ne,g(r.formatDate(s.created_at)),1),t("td",Fe,[t("div",Pe,[u(w,{variant:"edit",title:"Edit user",icon:"EditIcon",onClick:U=>r.editUser(s)},null,8,["onClick"]),u(w,{variant:"impersonate",title:"Impersonate user",icon:"ImpersonateIcon",onClick:U=>r.impersonateUser(s)},null,8,["onClick"]),u(w,{variant:"delete",title:"Delete user",icon:"DeleteIcon",onClick:U=>r.deleteUser(s)},null,8,["onClick"])])])]))),128))]),empty:N(()=>[u(_,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("h3",Te,g(r.emptyStateTitle),1),t("p",De,g(r.emptyStateMessage),1),r.hasActiveFilters?(l(),C("button",{key:0,onClick:e[10]||(e[10]=(...s)=>r.clearFilters&&r.clearFilters(...s)),class:"mt-3 inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 transition-colors"}," Clear filters ")):f("",!0)]),_:1},8,["data","loading","error","onRetry"]),r.pagination?(l(),v(B,{key:0,pagination:r.pagination,"per-page":r.perPage,onPageChange:r.changePage,onPerPageChange:r.handlePerPageChange},null,8,["pagination","per-page","onPageChange","onPerPageChange"])):f("",!0)])}const Qe=P(ue,[["render",Ae]]);export{Qe as default};
